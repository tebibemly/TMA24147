import numpy as np
import matplotlib.pyplot as plt
from PIL import Image

# Charger image
img = Image.open('Image.png').convert('L')  # niveaux de gris
img_array = np.array(img)

# Fonction de quantification
def quantize(img, levels):
    max_val = 255
    step = max_val // (levels - 1)
    img_q = (img // step) * step
    return img_q

img_4n = quantize(img_array, 4)
img_2n = quantize(img_array, 2)

# Affichage des quantifications
plt.figure(figsize=(12,4))
plt.subplot(1,3,1)
plt.imshow(img_array, cmap='gray')
plt.title("Original 256 niveaux")
plt.axis('off')

plt.subplot(1,3,2)
plt.imshow(img_4n, cmap='gray')
plt.title("Quantification 4 niveaux")
plt.axis('off')

plt.subplot(1,3,3)
plt.imshow(img_2n, cmap='gray')
plt.title("Quantification 2 niveaux")
plt.axis('off')
plt.show()

# Pixelisation
h, w = img_array.shape
img_small = img.resize((w//8, h//8), Image.NEAREST)
img_pixel = img_small.resize((w, h), Image.NEAREST)

plt.figure(figsize=(6,6))
plt.imshow(img_pixel, cmap='gray')
plt.title("Image pixelis√©e")
plt.axis('off')
plt.show()